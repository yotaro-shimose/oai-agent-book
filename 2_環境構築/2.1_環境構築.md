# 2.1 環境構築

OpenAI Agents SDKを使用するための環境を構築していきましょう。この章では、Pythonのセットアップから始めて、仮想環境の構築、OpenAI APIキーの取得と設定、そしてAgents SDKのインストールまでを順を追って説明します。

## Pythonのセットアップ

OpenAI Agents SDKを使用するには、Python 3.8以上が必要です。まずは、お使いのシステムにPythonがインストールされているか、そしてそのバージョンを確認しましょう。

ターミナルを開いて、以下のコマンドを実行します：

```bash
python --version
```

もしPythonがインストールされていない場合や、バージョンが3.8未満の場合は、[Python公式サイト](https://www.python.org/downloads/)から最新版をダウンロードしてインストールしてください。

## uvによる仮想環境の構築

Pythonプロジェクトでは、依存関係の競合を避けるために仮想環境を使用することが推奨されています。ここでは、高速なパッケージマネージャである`uv`を使用して仮想環境を構築します。

まず、プロジェクトのディレクトリを作成し、そこに移動します：

```bash
mkdir my_agents_project
cd my_agents_project
```

次に、仮想環境を作成します：

```bash
python -m venv .venv
```

作成した仮想環境を有効化します：

```bash
# macOSとLinuxの場合
source .venv/bin/activate

# Windowsの場合
.venv\Scripts\activate
```

仮想環境が有効化されると、ターミナルのプロンプトが変わり、`.venv`が表示されるようになります。

## OpenAI APIキーの取得と設定

OpenAI Agents SDKを使用するには、OpenAIのAPIキーが必要です。まだ持っていない場合は、以下の手順で取得します：

1. [OpenAIのプラットフォーム](https://platform.openai.com/)にアクセスし、アカウントを作成またはログインします。
2. 右上のプロフィールアイコンをクリックし、「View API keys」を選択します。
3. 「Create new secret key」ボタンをクリックして、新しいAPIキーを生成します。
4. 生成されたAPIキーをコピーします（このキーは一度しか表示されないので、安全な場所に保存してください）。

APIキーを取得したら、環境変数として設定します：

```bash
# macOSとLinuxの場合
export OPENAI_API_KEY=sk-あなたのAPIキー

# Windowsの場合
set OPENAI_API_KEY=sk-あなたのAPIキー
```

より永続的に設定するには、`.env`ファイルを作成して、そこにAPIキーを保存する方法もあります：

```bash
echo "OPENAI_API_KEY=sk-あなたのAPIキー" > .env
```

そして、Pythonコード内で`python-dotenv`ライブラリを使用して読み込みます：

```python
from dotenv import load_dotenv
load_dotenv()
```

## Agents SDKのインストール

仮想環境が有効化され、APIキーが設定されたら、OpenAI Agents SDKをインストールします：

```bash
pip install openai-agents
```

音声機能も使用したい場合は、オプションの音声グループをインストールします：

```bash
pip install 'openai-agents[voice]'
```

## 動作確認

環境構築が完了したら、簡単なコードを書いて動作確認をしましょう。以下のコードを`test_agent.py`というファイル名で保存します：

```python
from agents import Agent, Runner

# エージェントの作成
agent = Agent(
    name="Assistant",
    instructions="あなたは親切なアシスタントです。"
)

# エージェントの実行
result = Runner.run_sync(agent, "プログラミングの再帰に関する俳句を書いてください。")
print(result.final_output)
```

ターミナルで以下のコマンドを実行します：

```bash
python test_agent.py
```

正しく設定されていれば、エージェントからの応答が表示されるはずです。例えば：

```
コードの中のコード
関数が自身を呼び出す
無限の舞い
```

これで、OpenAI Agents SDKを使用するための環境構築は完了です。次の章では、実際にエージェントを作成し、より高度な機能を使用していきます。